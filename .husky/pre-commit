#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Prevent large files from being committed
MAX_FILE_SIZE=10485760 # 10MB
echo "Checking for large files..."
FILES_TOO_LARGE=$(find . -type f -size +${MAX_FILE_SIZE}c -not -path "./.git/*" -not -path "./node_modules/*" -not -path "./dist/*" | wc -l)

if [ "$FILES_TOO_LARGE" -gt 0 ]; then
    echo " Error: The following files are larger than 10MB:"
    find . -type f -size +${MAX_FILE_SIZE}c -not -path "./.git/*" -not -path "./node_modules/*" -not -path "./dist/*"
    echo "\nPlease use Git LFS for large files or add them to .gitignore"
    exit 1
fi

# Run lint-staged
echo "\n Running pre-commit checks..."
npx lint-staged
